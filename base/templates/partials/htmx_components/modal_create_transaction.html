<style>
    /* Animação para o fundo escuro */
    @keyframes fadeIn {
        from { opacity: 0; }
        to { opacity: 1; }
    }
    
    /* Animação para a caixa do modal (zoom suave) */
    @keyframes scaleIn {
        from { 
            opacity: 0; 
            transform: scale(0.95); 
        }
        to { 
            opacity: 1; 
            transform: scale(1); 
        }
    }
    
    .modal-animate-fade {
        animation: fadeIn 0.3s ease-out forwards;
    }
    
    .modal-animate-scale {
        animation: scaleIn 0.3s cubic-bezier(0.16, 1, 0.3, 1) forwards; /* Curva suave estilo iOS */
    }
</style>
<div class="modal-animate-fade fixed inset-0 bg-slate-900/40 overflow-y-auto h-full w-full z-50 flex items-center justify-center backdrop-blur-sm p-4">
    
    <div class="modal-animate-scale w-full max-w-lg bg-[#0f0f0f] border border-white/5 relative overflow-hidden shadow-2xl rounded-sm">

        <div class="absolute top-0 left-1/2 -translate-x-1/2 w-full h-1 bg-linear-to-r from-transparent via-slate-500 to-transparent opacity-50"></div>
        <div class="absolute -top-20 -right-20 w-64 h-64 bg-slate-600/5 rounded-full blur-[80px] pointer-events-none"></div>

        <div class="p-8">
            <div class="mb-8 text-center space-y-2">
                <h1 class="text-2xl font-serif font-bold text-white uppercase tracking-tight">Nova Transação</h1>
                <p class="text-gray-500 text-[10px] uppercase tracking-[0.2em]">Adicionar registro ao fluxo financeiro</p>
            </div>

            <form method="POST" action="{% url "transactions" %}?mes={{ mes_atual }}&ano={{ ano_atual }}" class="space-y-6">
                {% csrf_token %}
                <div class="space-y-1">
                    <label for="{{ form.nome.id_for_label }}" class="text-[10px] text-gray-400 uppercase tracking-widest ml-1">Nome da transação</label>
                    <input value="{{ form.nome.value|default:"" }}" name="{{ form.nome.name }}" id="{{ form.nome.id }}" type="text" placeholder="Ex: Tênis"
                            class="w-full bg-black/40 border border-white/10 rounded-sm px-4 py-3 text-white placeholder:text-gray-600 focus:outline-none focus:border-slate-500 transition-all">
                </div>

                <div class="grid grid-cols-2 gap-4">
                    <div class="space-y-1">
                        <label for="{{ form.valor.id_for_label }}" class="text-[10px] text-gray-400 uppercase tracking-widest ml-1">Valor (R$)</label>
                        <input value="{{ form.valor.value|default:"" }}" name="{{ form.valor.name }}" id="{{ form.valor.id }}" type="number" step="0.01" placeholder="0,00"
                                class="w-full bg-black/40 border border-white/10 rounded-sm px-4 py-3 text-white placeholder:text-gray-600 focus:outline-none focus:border-slate-500 transition-all font-mono">
                    </div>
                    <div class="space-y-1">
                        <label for="{{ form.categoria.id_for_label }}" class="text-[10px] text-gray-400 uppercase tracking-widest ml-1">Categoria de Destino</label>
                        <div class="relative">
                            <select name="{{ form.categoria.name }}" id="{{ form.categoria.id }}" class="w-full bg-black/40 border border-white/10 rounded-sm px-4 py-4 text-white appearance-none focus:outline-none focus:border-slate-500 transition-all text-sm">
                                {% for categoria in categorias %}
                                <option value="{{ categoria.id }}" class="bg-gray-800">{{ categoria.nome|capfirst }}</option>
                                {% endfor %}
                            </select>
                            <div class="absolute inset-y-0 right-0 flex items-center px-4 pointer-events-none text-gray-500">
                                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path d="M19 9l-7 7-7-7" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="grid grid-cols-2 gap-4">
                    <div class="space-y-1">
                        <label for="tipo" class="text-[10px] text-gray-400 uppercase tracking-widest ml-1">Recorrência</label>
                        <div class="relative">
                            <select name="tipo" id="{{ form.tipo.id }}" hx-get="{% url "transactions_tipo" %}" hx-trigger="change" hx-target="#parcela_field" class="w-full bg-black/40 border border-white/10 rounded-sm px-4 py-4 text-white appearance-none focus:outline-none focus:border-slate-500 transition-all text-sm">
                                {% for tipo in tipos %}
                                <option  value="{{ tipo.0 }}" class="bg-gray-800">{{ tipo.1|capfirst }}</option>
                                {% endfor %}
                            </select>
                            <div class="absolute inset-y-0 right-0 flex items-center px-4 pointer-events-none text-gray-500">
                                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path d="M19 9l-7 7-7-7" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>
                            </div>
                        </div>
                    </div>
                    <div id="parcela_field" class="space-y-1">
                        
                    </div>
                </div>

                <div class="flex flex-col md:flex-row pt-6 gap-3">
                    <button type="submit" class="w-full md:order-2 px-6 py-3 bg-white text-black text-sm font-bold uppercase tracking-widest rounded-sm hover:bg-gray-200 transition-colors cursor-pointer">
                        Confirmar Lançamento
                    </button>
                    <button type="button" onclick="document.getElementById('modal_create_transaction').innerHTML=''" class="w-full md:order-1 px-6 py-3 bg-transparent text-gray-500 text-sm font-bold uppercase tracking-widest rounded-sm border border-white/10 hover:bg-white/5 hover:text-white transition-all cursor-pointer">
                        Voltar
                    </button>
                </div>
            </form>
        </div>
    </div>
</div>